{% extends 'website/base.html' %}

{% block custom_css %}
<style type="text/css">
thead {
  background-color: var(--secondary-color);
}

.sub-heading {
  background-color: var(--primary-color);
  color: white;
  font-weight: bold;
}

h2 > i:first-child {
  margin-left: 25px;
}
</style>
{% endblock custom_css %}

{% block content %}
<div class="container">
<h2>
  {{ project }}
  <i class="fas fa-pencil-alt" data-toggle="tooltip" title="Edit Project"></i>
  <i class="fas fa-dollar-sign" data-toggle="tooltip" title="Financial Summary"></i>
  <i class="far fa-trash-alt" data-toggle="tooltip" title="Delete Project"></i>
</h2>
<table class="table">
    <thead>
      <tr>
        <th class="center" colspan="4">
          Posts
          <i class="far fa-plus-square"></i>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr class="sub-heading">
        <td>Name</td>
        <td>Location</td>
        <td>
          Topic
          <i class="far fa-plus-square"></i>
        </td>
        <td>Posted</td>
      </tr>
      {% for post in project.get_posts %}
      <tr>
        <td><a href="{% url 'administration:view_project' pk=project.pk %}">{{ project }}</a></td>
        <td>${{ project.get_amount_earned }}</td>
        <td>${{ project.get_amount_owed }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="3">There are currently no posts for this project.</td>
      </tr>
      {% endfor %}
    </tbody>
</table>
</div>
{% endblock content %}

{% block js %}
<script>
$('.fa-pencil-alt').click(function() {
  window.location.href = "{% url 'administration:update_project' pk=project.pk %}";
});

$('.fa-trash-alt').click(function() {
  if(confirm("Are you sure you want to delete this project?")) {
    window.location.href = "{% url 'administration:delete_project' pk=project.pk %}";
  }
});
</script>
{% endblock js %}
